(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function l(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(e){if(e.ep)return;e.ep=!0;const n=l(e);fetch(e.href,n)}})();const x=1e-9;function w(t,s=10,l=["+","-","*","/"]){const i=t.map(o=>({val:o,expr:`${o}`})),e=new Set(l),n=new Set;function a(o,r){if(!Number.isFinite(o)||!Number.isFinite(r)||Math.abs(r)>9||o<0&&Math.abs(r-Math.trunc(r))>x)return null;const c=o**r;return!Number.isFinite(c)||Math.abs(c)>1e9?null:c}function d(o,r){const c=[];if(e.has("+")&&c.push({val:o.val+r.val,expr:`(${o.expr}+${r.expr})`}),e.has("-")&&c.push({val:o.val-r.val,expr:`(${o.expr}-${r.expr})`}),e.has("*")&&c.push({val:o.val*r.val,expr:`(${o.expr}*${r.expr})`}),e.has("/")&&Math.abs(r.val)>x&&c.push({val:o.val/r.val,expr:`(${o.expr}/${r.expr})`}),e.has("^")){const h=a(o.val,r.val);h!=null&&c.push({val:h,expr:`(${o.expr}^${r.expr})`})}return c}function p(o){if(o.length===1){Math.abs(o[0].val-s)<x&&n.add(o[0].expr.replace(/^\((.*)\)$/,"$1"));return}for(let r=0;r<o.length-1;r++){const c=o[r],h=o[r+1];for(const b of d(c,h)){const N=o.slice(0,r).concat(b,o.slice(r+2));p(N)}}}return p(i),Array.from(n).sort()}const f=t=>document.querySelector(t);let v=new Set(["+","-","*","/"]);function S(){return Array.from(v)}document.querySelectorAll("#ops .op").forEach(t=>{t.addEventListener("click",()=>{const s=t.dataset.op;v.has(s)?(v.delete(s),t.classList.remove("on")):(v.add(s),t.classList.add("on"));const l=document.getElementById("digits").value.trim();if(/^\d{4}$/.test(l)){const i=w(l.split("").map(Number),10,S());M(i,document.getElementById("all").checked)}})});const y=f("#scan"),$=f("#scanStatus"),m=f("#summary"),u=m.getContext("2d");function T(t,s){u.clearRect(0,0,m.width,m.height);const l=Math.max(t,s),i=m.width,e=m.height,n=40,a=(i-3*n)/2,d=(e-2*n)/l,p=[{x:n,v:t,label:`solved (${t})`},{x:2*n+a,v:s,label:`unsolved (${s})`}];u.font="14px system-ui",u.textBaseline="bottom",p.forEach(o=>{const r=o.v*d;u.fillRect(o.x,e-n-r,a,r),u.fillText(o.label,o.x,e-n-r-6)}),u.beginPath(),u.moveTo(n-10,e-n),u.lineTo(i-n+10,e-n),u.stroke()}async function P(){y.disabled=!0,$.textContent="zzzzzzzz...",await new Promise(i=>setTimeout(i,0));let t=0;const s=S();for(let i=0;i<1e4;i+=500){const e=Math.min(1e4,i+500);for(let n=i;n<e;n++){const d=n.toString().padStart(4,"0").split("").map(Number);w(d,10,s).length>0&&t++}$.textContent=`Scanning... ${e}/10000`,await new Promise(n=>setTimeout(n,0))}const l=1e4-t;T(t,l),$.textContent=`Done: ${t} solvable, ${l} not solvable with [${s.join(" ")}].`,y.disabled=!1}y.addEventListener("click",()=>void P());const E=f("#form"),L=f("#digits"),z=f("#all"),g=f("#out");function O(t){if(!/^\d{4}$/.test(t))throw new Error("Enter exactly 4 digits");return t.split("").map(s=>Number(s))}function M(t,s){if(t.length===0){g.innerHTML="<p>No solution with + - * /.</p>";return}const l=`<p><strong>${t.length}</strong> solutions(s). </p>`,i=s?t:t.slice(0,5);g.innerHTML=l+`<ul>${i.map(e=>`<li><code>${e}</code></li>`).join("")}</ul>`,!s&&t.length>5&&(g.innerHTML+=`<p>Showing 5 of ${t.length}.</p>`)}E.addEventListener("submit",t=>{t.preventDefault();try{const s=O(L.value.trim()),l=w(s,10,S());M(l,z.checked)}catch(s){g.innerHTML=`<p style="color:#b00">${s.message}</p>`}});document.querySelectorAll(".ex").forEach(t=>t.addEventListener("click",s=>{L.value=s.target.textContent??"",E.requestSubmit()}));
