(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function l(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(t){if(t.ep)return;t.ep=!0;const o=l(t);fetch(t.href,o)}})();const O="modulepreload",C=function(n){return"/sydney-train-game/"+n},b={},z=function(s,l,i){let t=Promise.resolve();if(l&&l.length>0){let p=function(e){return Promise.all(e.map(r=>Promise.resolve(r).then(c=>({status:"fulfilled",value:c}),c=>({status:"rejected",reason:c}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),u=a?.nonce||a?.getAttribute("nonce");t=p(l.map(e=>{if(e=C(e),e in b)return;b[e]=!0;const r=e.endsWith(".css"),c=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${c}`))return;const f=document.createElement("link");if(f.rel=r?"stylesheet":O,r||(f.as="script"),f.crossOrigin="",f.href=e,u&&f.setAttribute("nonce",u),document.head.appendChild(f),r)return new Promise(($,E)=>{f.addEventListener("load",$),f.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${e}`)))})}))}function o(a){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=a,window.dispatchEvent(u),!u.defaultPrevented)throw a}return t.then(a=>{for(const u of a||[])u.status==="rejected"&&o(u.reason);return s().catch(o)})},w=1e-9;function P(n,s=10,l=["+","-","*","/"]){const i=n.map(e=>({val:e,expr:`${e}`})),t=new Set(l),o=new Set;function a(e,r){if(!Number.isFinite(e)||!Number.isFinite(r)||Math.abs(r)>9||e<0&&Math.abs(r-Math.trunc(r))>w)return null;const c=e**r;return!Number.isFinite(c)||Math.abs(c)>1e9?null:c}function u(e,r){const c=[];if(t.has("+")&&c.push({val:e.val+r.val,expr:`(${e.expr}+${r.expr})`}),t.has("-")&&c.push({val:e.val-r.val,expr:`(${e.expr}-${r.expr})`}),t.has("*")&&c.push({val:e.val*r.val,expr:`(${e.expr}*${r.expr})`}),t.has("/")&&Math.abs(r.val)>w&&c.push({val:e.val/r.val,expr:`(${e.expr}/${r.expr})`}),t.has("^")){const f=a(e.val,r.val);f!=null&&c.push({val:f,expr:`(${e.expr}^${r.expr})`})}return c}function p(e){if(e.length===1){Math.abs(e[0].val-s)<w&&o.add(e[0].expr.replace(/^\((.*)\)$/,"$1"));return}for(let r=0;r<e.length-1;r++){const c=e[r],f=e[r+1];for(const $ of u(c,f)){const E=e.slice(0,r).concat($,e.slice(r+2));p(E)}}}return p(i),Array.from(o).sort()}const A=!0;let v=null;v=await z(()=>import("./trace-BmJ0CuTq.js"),[]);const m=n=>document.querySelector(n);let g=new Set(["+","-","*","/"]);function y(){return Array.from(g)}document.querySelectorAll("#ops .op").forEach(n=>{n.addEventListener("click",()=>{const s=n.dataset.op;g.has(s)?(g.delete(s),n.classList.remove("on")):(g.add(s),n.classList.add("on"));const l=document.getElementById("digits").value.trim();if(/^\d{4}$/.test(l)){const i=P(l.split("").map(Number),10,y());N(i,document.getElementById("all").checked)}})});const L=m("#scan"),S=m("#scanStatus"),h=m("#summary"),d=h.getContext("2d");function q(n,s){d.clearRect(0,0,h.width,h.height);const l=Math.max(n,s),i=h.width,t=h.height,o=40,a=(i-3*o)/2,u=(t-2*o)/l,p=[{x:o,v:n,label:`solved (${n})`},{x:2*o+a,v:s,label:`unsolved (${s})`}];d.font="14px system-ui",d.textBaseline="bottom",p.forEach(e=>{const r=e.v*u;d.fillRect(e.x,t-o-r,a,r),d.fillText(e.label,e.x,t-o-r-6)}),d.beginPath(),d.moveTo(o-10,t-o),d.lineTo(i-o+10,t-o),d.stroke()}async function B(){L.disabled=!0,S.textContent="zzzzzzzz...",await new Promise(i=>setTimeout(i,0));let n=0;const s=y();for(let i=0;i<1e4;i+=500){const t=Math.min(1e4,i+500);for(let o=i;o<t;o++){const u=o.toString().padStart(4,"0").split("").map(Number);P(u,10,s).length>0&&n++}S.textContent=`Scanning... ${t}/10000`,await new Promise(o=>setTimeout(o,0))}const l=1e4-n;q(n,l),S.textContent=`Done: ${n} solvable, ${l} not solvable with [${s.join(" ")}].`,L.disabled=!1}L.addEventListener("click",()=>void B());const M=m("#form"),T=m("#digits"),_=m("#all"),x=m("#out");function j(n){if(!/^\d{4}$/.test(n))throw new Error("Enter exactly 4 digits");return n.split("").map(s=>Number(s))}function N(n,s){if(n.length===0){x.innerHTML="<p>No solution with + - * /.</p>";return}const l=`<p><strong>${n.length}</strong> solutions(s). </p>`,i=s?n:n.slice(0,5);x.innerHTML=l+`<ul>${i.map(t=>`<li><code>${t}</code></li>`).join("")}</ul>`,!s&&n.length>5&&(x.innerHTML+=`<p>Showing 5 of ${n.length}.</p>`)}M.addEventListener("submit",n=>{n.preventDefault();try{const s=j(T.value.trim()),l=P(s,10,y());if(N(l,_.checked),A&&v){const i=y(),t=v.traceSolve(s,i,10);console.clear(),console.group(`Trace for ${s.join("")}, ops=[${i.join(" ")}]`),v.printTrace(t,!1),console.groupEnd()}}catch(s){x.innerHTML=`<p style="color:#b00">${s.message}</p>`}});document.querySelectorAll(".ex").forEach(n=>n.addEventListener("click",s=>{T.value=s.target.textContent??"",M.requestSubmit()}));
