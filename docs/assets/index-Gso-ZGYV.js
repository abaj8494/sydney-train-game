(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))c(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&c(a)}).observe(document,{childList:!0,subtree:!0});function i(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(n){if(n.ep)return;n.ep=!0;const o=i(n);fetch(n.href,o)}})();const B="modulepreload",O=function(t){return"/sydney-train-game/"+t},b={},A=function(s,i,c){let n=Promise.resolve();if(i&&i.length>0){let m=function(e){return Promise.all(e.map(r=>Promise.resolve(r).then(l=>({status:"fulfilled",value:l}),l=>({status:"rejected",reason:l}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),u=a?.nonce||a?.getAttribute("nonce");n=m(i.map(e=>{if(e=O(e),e in b)return;b[e]=!0;const r=e.endsWith(".css"),l=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${l}`))return;const d=document.createElement("link");if(d.rel=r?"stylesheet":B,r||(d.as="script"),d.crossOrigin="",d.href=e,u&&d.setAttribute("nonce",u),document.head.appendChild(d),r)return new Promise((x,$)=>{d.addEventListener("load",x),d.addEventListener("error",()=>$(new Error(`Unable to preload CSS for ${e}`)))})}))}function o(a){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=a,window.dispatchEvent(u),!u.defaultPrevented)throw a}return n.then(a=>{for(const u of a||[])u.status==="rejected"&&o(u.reason);return s().catch(o)})},E=1e-9;function L(t,s=10,i=["+","-","*","/"]){const c=t.map(e=>({val:e,expr:`${e}`})),n=new Set(i),o=new Set;function a(e,r){if(!Number.isFinite(e)||!Number.isFinite(r)||Math.abs(r)>9||e<0&&Math.abs(r-Math.trunc(r))>E)return null;const l=e**r;return!Number.isFinite(l)||Math.abs(l)>1e9?null:l}function u(e,r){const l=[];if(n.has("+")&&l.push({val:e.val+r.val,expr:`(${e.expr}+${r.expr})`}),n.has("-")&&l.push({val:e.val-r.val,expr:`(${e.expr}-${r.expr})`}),n.has("*")&&l.push({val:e.val*r.val,expr:`(${e.expr}*${r.expr})`}),n.has("/")&&Math.abs(r.val)>E&&l.push({val:e.val/r.val,expr:`(${e.expr}/${r.expr})`}),n.has("^")){const d=a(e.val,r.val);d!=null&&l.push({val:d,expr:`(${e.expr}^${r.expr})`})}return l}function m(e){if(e.length===1){Math.abs(e[0].val-s)<E&&o.add(e[0].expr.replace(/^\((.*)\)$/,"$1"));return}for(let r=0;r<e.length-1;r++){const l=e[r],d=e[r+1];for(const x of u(l,d)){const $=e.slice(0,r).concat(x,e.slice(r+2));m($)}}}return m(c),Array.from(o).sort()}let g=null;g=await A(()=>import("./trace-BmJ0CuTq.js"),[]);const p=t=>document.querySelector(t);let v=new Set(["+","-","*","/"]);function P(){return Array.from(v)}document.querySelectorAll("#ops .op").forEach(t=>{t.addEventListener("click",()=>{const s=t.dataset.op;v.has(s)?(v.delete(s),t.classList.remove("on")):(v.add(s),t.classList.add("on"));const i=document.getElementById("digits").value.trim();if(/^\d{4}$/.test(i)){const c=L(i.split("").map(Number),10,P());T(c,document.getElementById("all").checked)}})});const S=p("#scan"),w=p("#scanStatus"),h=p("#summary"),f=h.getContext("2d");function C(t,s){f.clearRect(0,0,h.width,h.height);const i=Math.max(t,s),c=h.width,n=h.height,o=40,a=(c-3*o)/2,u=(n-2*o)/i,m=[{x:o,v:t,label:`solved (${t})`},{x:2*o+a,v:s,label:`unsolved (${s})`}];f.font="14px system-ui",f.textBaseline="bottom",m.forEach(e=>{const r=e.v*u;f.fillRect(e.x,n-o-r,a,r),f.fillText(e.label,e.x,n-o-r-6)}),f.beginPath(),f.moveTo(o-10,n-o),f.lineTo(c-o+10,n-o),f.stroke()}async function z(){S.disabled=!0,w.textContent="zzzzzzzz...",await new Promise(c=>setTimeout(c,0));let t=0;const s=P();for(let c=0;c<1e4;c+=500){const n=Math.min(1e4,c+500);for(let o=c;o<n;o++){const u=o.toString().padStart(4,"0").split("").map(Number);L(u,10,s).length>0&&t++}w.textContent=`Scanning... ${n}/10000`,await new Promise(o=>setTimeout(o,0))}const i=1e4-t;C(t,i),w.textContent=`Done: ${t} solvable, ${i} not solvable with [${s.join(" ")}].`,S.disabled=!1}S.addEventListener("click",()=>void z());const M=p("#form"),N=p("#digits"),q=p("#all"),y=p("#out");function _(t){if(!/^\d{4}$/.test(t))throw new Error("Enter exactly 4 digits");return t.split("").map(s=>Number(s))}function T(t,s){if(t.length===0){y.innerHTML="<p>No solution with + - * /.</p>";return}const i=`<p><strong>${t.length}</strong> solutions(s). </p>`,c=s?t:t.slice(0,5);y.innerHTML=i+`<ul>${c.map(n=>`<li><code>${n}</code></li>`).join("")}</ul>`,!s&&t.length>5&&(y.innerHTML+=`<p>Showing 5 of ${t.length}.</p>`)}M.addEventListener("submit",t=>{t.preventDefault();try{const s=_(N.value.trim()),i=L(s,10,P());T(i,q.checked)}catch(s){y.innerHTML=`<p style="color:#b00">${s.message}</p>`}});document.querySelectorAll(".ex").forEach(t=>t.addEventListener("click",s=>{N.value=s.target.textContent??"",M.requestSubmit()}));const j=document.getElementById("traceBtn");j?.addEventListener("click",()=>{if(!g)return;const t=document.getElementById("digits").value.trim();if(!/^\d{4}$/.test(t))return;const s=t.split("").map(Number),i=Array.from(v),c=g.traceSolve(s,i,10);console.clear(),console.group(`Trace for ${s.join("")}, ops=[${i.join(" ")}]`),g.printTrace(c,!1),console.groupEnd()});
